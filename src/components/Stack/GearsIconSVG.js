import React, { useRef, useEffect, useState } from 'react'
import styled from 'styled-components'
import * as svgjs from 'svg.js'
import { ReactBasicScroll } from 'react-basic-scroll'

const Container = styled.svg`
  height: 80px;
  .color-contrast-stroke {
    stroke: var(--color-contrast, #a9b7c6);
  }
  .color-contrast-fill {
    fill: var(--color-contrast, #a9b7c6);
  }
  .color-background-fill {
    fill: var(--color-bg-primary, #2b2b2b);
  }
  .color-background-fill {
    fill: var(--color-bg-primary, #2b2b2b);
  }

  #gear-lg,
  #gear-md,
  #gear-sm {
  }

  #gear-lg {
    //transform-origin: 125 125;
    //transform: rotate(var(--deg));
    //rotate: 125 125 0 180deg;
  }
  #gear-md {
    //transform-origin: 20% 40%;
    //transform: rotate(var(--deg));
    //rotate: 1 -0.5 1 180deg;
  }
  #gear-sm {
    //transform-origin: 20% 40%;
    //transform: rotate(var(--deg));
    //rotate: 1 -0.5 1 180deg;
  }
`

const GearsIconSVG = props => {
  const gearsRef = useRef(null)
  const gearSmRef = useRef(null)
  const gearMdRef = useRef(null)
  const gearLgRef = useRef(null)

  let gearLg = null
  let gearMd = null
  let gearSm = null

  useEffect(() => {
    gearLg = svgjs.adopt(gearLgRef.current)
    gearMd = svgjs.adopt(gearMdRef.current)
    gearSm = svgjs.adopt(gearSmRef.current)
  }, [])

  const config = {
    from: 'top-bottom',
    to: 'bottom-top',
    props: {
      '--deg': {
        from: 0,
        to: 360,
      },
    },
    inside: (instance, percentage, props) => {
      if (gearSm !== null) {
        gearLg.rotate(props['--deg'], 125, 125)
        gearMd.rotate(`-${props['--deg']}`, 317, 244)
        gearSm.rotate(props['--deg'], 210, 345)
      }
    },
  }

  return (
    <Container
      viewBox='0 0 400 400'
      version='1.1'
      xmlns='http://www.w3.org/2000/svg'
      xlinkHref='http://www.w3.org/1999/xlink'
      ref={gearsRef}
    >
      <ReactBasicScroll config={config}>
        <g
          stroke='none'
          strokeWidth='1'
          className='color-contrast-fill'
          fillRule='evenodd'
        >
          <path
            ref={gearLgRef}
            id='gear-lg'
            d='M214.606616,176.079069 L229.135197,193.789992 C230.032735,194.884128 229.708666,196.822768 228.411367,198.120066 L197.874804,228.656629 C196.577506,229.953927 194.638866,230.277997 193.544731,229.380458 L175.757695,214.789441 C168.414103,218.949691 160.509658,222.235055 152.185994,224.503903 L149.920998,247.45 C149.781983,248.858326 148.182006,250 146.347349,250 L103.162128,250 C101.327471,250 99.7274935,248.858326 99.5884785,247.45 L97.3097799,224.365081 C89.0616826,222.071477 81.2297379,218.778467 73.9526035,214.624703 L55.9647458,229.380458 C54.8706104,230.277997 52.9319704,229.953927 51.634672,228.656629 L21.0981092,198.120066 C19.8008109,196.822768 19.4767415,194.884128 20.37428,193.789992 L35.1925612,175.725913 C31.0408333,168.391298 27.7616722,160.497651 25.4960969,152.185994 L2.55,149.920998 C1.14167389,149.781983 0,148.182006 0,146.347349 L0,103.162128 C0,101.327471 1.14167389,99.7274935 2.55,99.5884785 L25.634919,97.3097799 C27.8947856,89.1830055 31.1248743,81.4602314 35.1925602,74.2740859 L20.37428,56.2100076 C19.4767415,55.1158722 19.8008109,53.1772321 21.0981092,51.8799338 L51.634672,21.3433709 C52.9319704,20.0460726 54.8706104,19.7220032 55.9647458,20.6195417 L73.9526035,35.3752968 C81.2297379,31.2215332 89.0616826,27.9285226 97.309779,25.6349233 L99.5884785,2.55 C99.7274935,1.14167389 101.327471,2.5870531e-16 103.162128,0 L146.347349,0 C148.182006,-2.5870531e-16 149.781983,1.14167389 149.920998,2.55 L152.185993,25.4960931 C160.509658,27.7649449 168.414103,31.0503093 175.757695,35.2105572 L193.544731,20.6195417 C194.638866,19.7220032 196.577506,20.0460726 197.874804,21.3433709 L228.411367,51.8799338 C229.708666,53.1772321 230.032735,55.1158722 229.135197,56.2100076 L214.606616,73.920931 C218.768909,81.2070115 222.06815,89.0497153 224.365077,97.3097795 L247.45,99.5884785 C248.858326,99.7274935 250,101.327471 250,103.162128 L250,146.347349 C250,148.182006 248.858326,149.781983 247.45,149.920998 L224.503907,152.185993 C222.201921,160.631215 218.853516,168.644883 214.606617,176.079069 L214.606616,176.079069 Z M125,188 C159.793939,188 188,159.793939 188,125 C188,90.2060608 159.793939,62 125,62 C90.2060608,62 62,90.2060608 62,125 C62,159.793939 90.2060608,188 125,188 Z'
          />
          <path
            ref={gearMdRef}
            id='gear-md'
            d='M376.498793,277.916502 L386.145771,289.676555 C386.741736,290.403061 386.526554,291.690318 385.665148,292.551724 L365.38887,312.828002 C364.527464,313.689408 363.240207,313.90459 362.513701,313.308624 L350.70311,303.620189 C345.826964,306.382595 340.578413,308.564077 335.0515,310.070592 L333.547543,325.3068 C333.455237,326.241929 332.392852,327 331.17464,327 L302.499653,327 C301.281441,327 300.219056,326.241929 300.12675,325.3068 L298.613694,309.978414 C293.136957,308.455461 287.936546,306.268902 283.104529,303.510803 L271.160591,313.308624 C270.434085,313.90459 269.146828,313.689408 268.285422,312.828002 L248.009144,292.551724 C247.147738,291.690318 246.932556,290.403061 247.528522,289.676555 L257.367861,277.682006 C254.611113,272.811822 252.43375,267.570441 250.929408,262.0515 L235.6932,260.547543 C234.758071,260.455237 234,259.392852 234,258.17464 L234,229.499653 C234,228.281441 234.758071,227.219056 235.6932,227.12675 L251.021586,225.613694 C252.522138,220.217516 254.666917,215.089594 257.36786,210.317993 L247.528522,198.323445 C246.932556,197.596939 247.147738,196.309682 248.009144,195.448276 L268.285422,175.171998 C269.146828,174.310592 270.434085,174.09541 271.160591,174.691376 L283.104529,184.489197 C287.936546,181.731098 293.136957,179.544539 298.613693,178.021589 L300.12675,162.6932 C300.219056,161.758071 301.281441,161 302.499653,161 L331.17464,161 C332.392852,161 333.455237,161.758071 333.547543,162.6932 L335.0515,177.929406 C340.578413,179.435923 345.826964,181.617405 350.70311,184.37981 L362.513701,174.691376 C363.240207,174.09541 364.527464,174.310592 365.38887,175.171998 L385.665148,195.448276 C386.526554,196.309682 386.741736,197.596939 386.145771,198.323445 L376.498793,210.083498 C379.262555,214.921456 381.453251,220.129011 382.978411,225.613694 L398.3068,227.12675 C399.241929,227.219056 400,228.281441 400,229.499653 L400,258.17464 C400,259.392852 399.241929,260.455237 398.3068,260.547543 L383.070594,262.0515 C381.542076,267.659127 379.318735,272.980203 376.498794,277.916502 L376.498793,277.916502 Z M316.5,285 C339.419817,285 358,266.419817 358,243.5 C358,220.580183 339.419817,202 316.5,202 C293.580183,202 275,220.580183 275,243.5 C275,266.419817 293.580183,285 316.5,285 Z'
          />
          <path
            ref={gearSmRef}
            id='gear-sm'
            d='M249.426911,367.47479 L255.819486,375.267597 C256.214403,375.749016 256.071813,376.602018 255.501002,377.172829 L242.064914,390.608917 C241.494103,391.179728 240.641101,391.322319 240.159682,390.927402 L232.333386,384.507354 C229.102205,386.337864 225.62425,387.783424 221.961837,388.781717 L220.965239,398.878 C220.904073,399.497663 220.200083,400 219.392834,400 L200.391336,400 C199.584087,400 198.880097,399.497663 198.818931,398.878 L197.816303,388.720636 C194.18714,387.71145 190.741085,386.262525 187.539146,384.434869 L179.624488,390.927402 C179.143069,391.322319 178.290067,391.179728 177.719256,390.608917 L164.283168,377.172829 C163.712357,376.602018 163.569766,375.749016 163.964683,375.267597 L170.484727,367.319402 C168.657967,364.092171 167.215136,360.618967 166.218283,356.961837 L156.122,355.965239 C155.502337,355.904073 155,355.200083 155,354.392834 L155,335.391336 C155,334.584087 155.502337,333.880097 156.122,333.818931 L166.279364,332.816303 C167.273706,329.240522 168.694945,325.842502 170.484726,322.680598 L163.964683,314.732403 C163.569766,314.250984 163.712357,313.397982 164.283168,312.827171 L177.719256,299.391083 C178.290067,298.820272 179.143069,298.677681 179.624488,299.072598 L187.539146,305.565131 C190.741085,303.737475 194.18714,302.28855 197.816303,301.279366 L198.818931,291.122 C198.880097,290.502337 199.584087,290 200.391336,290 L219.392834,290 C220.200083,290 220.904073,290.502337 220.965239,291.122 L221.961837,301.218281 C225.62425,302.216576 229.102205,303.662136 232.333386,305.492645 L240.159682,299.072598 C240.641101,298.677681 241.494103,298.820272 242.064914,299.391083 L255.501002,312.827171 C256.071813,313.397982 256.214403,314.250984 255.819486,314.732403 L249.426911,322.52521 C251.25832,325.731085 252.709986,329.181875 253.720634,332.816303 L263.878,333.818931 C264.497663,333.880097 265,334.584087 265,335.391336 L265,354.392834 C265,355.200083 264.497663,355.904073 263.878,355.965239 L253.781719,356.961837 C252.768845,360.677735 251.295547,364.203749 249.426912,367.47479 L249.426911,367.47479 Z M211.5,374 C226.687831,374 239,361.687831 239,346.5 C239,331.312169 226.687831,319 211.5,319 C196.312169,319 184,331.312169 184,346.5 C184,361.687831 196.312169,374 211.5,374 Z'
          />
        </g>
      </ReactBasicScroll>
    </Container>
  )
}

export default GearsIconSVG
